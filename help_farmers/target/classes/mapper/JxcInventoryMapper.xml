<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.help_farmers.mapper.JxcInventoryMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.help_farmers.model.domain.JxcInventory">
        <id column="id" property="id" />
        <result column="farm_products_number" property="farmProductsNumber" />
        <result column="w_id" property="wId" />
        <result column="iy_num" property="iyNum" />
        <result column="unit" property="unit" />
        <result column="warning_value" property="warningValue" />
        <result column="create_time" property="createTime" />
        <result column="create_by" property="createBy" />
        <result column="update_time" property="updateTime" />
        <result column="update_by" property="updateBy" />
        <result column="del_flag" property="delFlag" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, farm_products_number, w_id, iy_num, unit, warning_value, create_time, create_by, update_time, update_by, del_flag
    </sql>

    <select id="inventoryList" resultType="com.help_farmers.model.vo.InventoryVo">
        SELECT
        ji.id,
        ji.farm_products_number,
        ji.w_id,
        fp.name AS farmProductsName,
        jw.w_name AS wName,
        ji.unit,
        ji.iy_num,
        ji.warning_value,
        ji.create_time,
        ji.create_by,
        ji.update_time,
        ji.update_by
        FROM
        t_jxc_inventory ji
        LEFT JOIN t_base_farm_products fp ON ji.farm_products_number = fp.number
        LEFT JOIN t_jxc_warehouse jw ON ji.w_id = jw.w_id AND jw.del_flag = "0"
        <where>
            <if test="1 == 1">
                ji.del_flag = 0
            </if>
            <if test="farmProductsNumber != null and farmProductsNumber != ''">
                AND ji.farm_products_number like concat('%', #{farmProductsNumber},'%')
            </if>
            <if test="farmProductsName != null and farmProductsName != ''">
                AND fp.name like concat('%', #{farmProductsName},'%')
            </if>
        </where>
    </select>

</mapper>
